# SPDX-FileCopyrightText: 2025 ƒÅda
# SPDX-FileCopyrightText: 2025 slarticodefast
# SPDX-FileCopyrightText: 2025 Princess Cheeseballs
# SPDX-FileCopyrightText: 2023 Velcroboy
# SPDX-FileCopyrightText: 2025 Velcroboy
# SPDX-FileCopyrightText: 2024 SlamBamActionman
# SPDX-FileCopyrightText: 2025 SlamBamActionman
# SPDX-FileCopyrightText: 2025 Ed
# SPDX-FileCopyrightText: 2020 metalgearsloth
# SPDX-FileCopyrightText: 2021 metalgearsloth
# SPDX-FileCopyrightText: 2023 metalgearsloth
# SPDX-FileCopyrightText: 2024 metalgearsloth
# SPDX-FileCopyrightText: 2025 metalgearsloth
# SPDX-FileCopyrightText: 2024 K-Dynamic
# SPDX-FileCopyrightText: 2024 Verm
# SPDX-FileCopyrightText: 2022 themias
# SPDX-FileCopyrightText: 2023 themias
# SPDX-FileCopyrightText: 2024 themias
# SPDX-FileCopyrightText: 2024 degradka
# SPDX-FileCopyrightText: 2024 Thom
# SPDX-FileCopyrightText: 2022 Leon Friedrich
# SPDX-FileCopyrightText: 2023 Leon Friedrich
# SPDX-FileCopyrightText: 2023 deltanedas
# SPDX-FileCopyrightText: 2023 Chief-Engineer
# SPDX-FileCopyrightText: 2023 0x6273
# SPDX-FileCopyrightText: 2023 lzk
# SPDX-FileCopyrightText: 2023 Kara
# SPDX-FileCopyrightText: 2023 Dawid Bla
# SPDX-FileCopyrightText: 2020 AJCM-git
# SPDX-FileCopyrightText: 2023 AJCM-git
# SPDX-FileCopyrightText: 2022 Nemanja
# SPDX-FileCopyrightText: 2022 Willhelm53
# SPDX-FileCopyrightText: 2022 KIBORG04
# SPDX-FileCopyrightText: 2022 Rane
# SPDX-FileCopyrightText: 2021 Pieter-Jan Briers
# SPDX-FileCopyrightText: 2022 Pieter-Jan Briers
# SPDX-FileCopyrightText: 2022 Jacob Tong
# SPDX-FileCopyrightText: 2022 Emisse
# SPDX-FileCopyrightText: 2022 Absolute-Potato
# SPDX-FileCopyrightText: 2022 hubismal
# SPDX-FileCopyrightText: 2022 mirrorcult
# SPDX-FileCopyrightText: 2022 Kara D
# SPDX-FileCopyrightText: 2021 Ygg01
# SPDX-FileCopyrightText: 2021 Galactic Chimp
# SPDX-FileCopyrightText: 2021 Vera Aguilera Puerto
# SPDX-FileCopyrightText: 2020 Swept
# SPDX-FileCopyrightText: 2021 Swept
# SPDX-FileCopyrightText: 2021 Acruid
# SPDX-FileCopyrightText: 2021 py01
# SPDX-FileCopyrightText: 2020 DrSmugleaf
# SPDX-FileCopyrightText: 2020 Paul Ritter
# SPDX-FileCopyrightText: 2020 nuke
# SPDX-FileCopyrightText: 2020 ike709
# SPDX-License-Identifier: MIT

# TODO: Fix - The idea is that blood and vomit is potentially not tile-bound versions of puddles(?)
- type: entity
  id: PuddleTemporary
  parent: Puddle
  abstract: true
  components:
  - type: Transform
    anchored: true
    noRot: false

- type: entity
  id: PuddleSmear
  parent: PuddleTemporary
  suffix: Smear

- type: entity
  id: PuddleVomit
  parent: PuddleTemporary
  suffix: Vomit
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Vomit
          Quantity: 10

- type: entity
  id: PuddleEgg
  parent: PuddleTemporary
  suffix: Egg
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Egg
          Quantity: 6 # same as when cooking

- type: entity
  id: PuddleTomato
  parent: PuddleTemporary
  suffix: Tomato
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: JuiceTomato
          Quantity: 10

- type: entity
  parent: PuddleTemporary
  id: PuddleBloodSmall
  suffix: Blood (5u)
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Blood
          Quantity: 5

- type: entity
  parent: PuddleTemporary
  id: PuddleBlood
  suffix: Blood (30u)
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Blood
          Quantity: 30

- type: entity
  parent: PuddleTemporary
  id: PuddleFluorosulfuricAcidSmall
  suffix: FluorosulfuricAcid (5u)
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: FluorosulfuricAcid
          Quantity: 5

- type: entity
  parent: PuddleTemporary
  id: PuddleFluorosulfuricAcid
  suffix: FluorosulfuricAcid (15u)
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: FluorosulfuricAcid
          Quantity: 15

- type: entity
  id: PuddleWatermelon
  parent: PuddleTemporary
  suffix: Watermelon
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: JuiceWatermelon
          Quantity: 30

- type: entity
  id: PuddleFlour
  parent: PuddleTemporary
  suffix: Flour
  components:
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
        reagents:
        - ReagentId: Flour
          Quantity: 15

- type: entity
  id: PuddleSparkle
  name: sparkle
  placement:
    mode: SnapgridCenter
  components:
    # Animation is like 3 something seconds so we just need to despawn it before then.
    - type: TimedDespawn
      lifetime: 1
    - type: EvaporationSparkle
    - type: Transform
      noRot: true
      anchored: true
    - type: Sprite
      layers:
        - sprite: Fluids/wet_floor_sparkles.rsi
          state: sparkles
      drawdepth: Puddles
      color: "#FFFFFF80"

- type: entity
  name: puddle
  id: Puddle
  description: A puddle of liquid.
  placement:
    mode: SnapgridCenter
  components:
  - type: Clickable
  - type: Slippery
    staminaDamage: 0
    frictionStatusTime: 0 # Don't apply friction twice
  - type: Transform
    noRot: true
    anchored: true
  - type: Sprite
    layers:
    - sprite: Fluids/puddle.rsi
      state: splat0
    drawdepth: Puddles
    color: "#FFFFFF80"
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      slipFixture:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.4,-0.4,0.4,0.4"
        mask:
        - ItemMask
        layer:
        - SlipLayer
        hard: false
  - type: IconSmooth
    key: puddles
    additionalKeys:
    - walls
    base: splat
    mode: CardinalFlags
  - type: SolutionContainerManager
    solutions:
      puddle:
        maxVol: 1000
  - type: Puddle
  - type: MixableSolution
    solution: puddle
  - type: Appearance
  - type: ActiveEdgeSpreader
  - type: EdgeSpreader
    id: Puddle
  - type: StepTrigger
  - type: Edible
    edible: Drink
    delay: 3
    transferAmount: 1
    solution: puddle
    utensil: Spoon
  - type: ExaminableSolution
    solution: puddle
    locVolume: "examinable-solution-on-examine-volume-puddle"
  - type: DrawableSolution
    solution: puddle
  - type: BadDrink
  - type: IgnoresFingerprints
  - type: Tag
    tags:
    - DNASolutionScannable
